<!DOCTYPE html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    
    
    <title>Hugo Site Deployment - Stou.dk</title>
    
    <link rel="stylesheet" href="/sass/main.min.9e5e80bb1113b3619680b2909b087d084f512fad2c95fb108afda733278200a9.css" />
    
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />

    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="description" content="Description of the setup I use for deployment and hosting my blog on github.">

<meta name="keywords" content="">

 
<meta property="og:type" content="article"/>

<meta property="og:description" content="Description of the setup I use for deployment and hosting my blog on github."/>

<meta property="og:title" content="Hugo Site Deployment : Stou.dk"/>
<meta property="og:site_name" content="Stou.dk"/>

<meta property="og:image" content="//www.stou.dk/media/2014/hugo-site-deployment/publish-workflow-alt.png" />
<meta property="og:image:type" content="image/jpeg" />

<meta property="og:url" content="//www.stou.dk/2014/11/hugo-site-deployment/" />
<meta property="article:published_time" content="2014-11-30"/>
<meta property="article:modified_time" content="2014-11-30"/>



<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@rstou" />
<meta name="twitter:title" content="Hugo Site Deployment : Stou.dk" />

<meta name="twitter:description" content="Description of the setup I use for deployment and hosting my blog on github." />


<meta name="twitter:creator" content="@rstou" />

<meta name="twitter:image:src" content="//www.stou.dk/media/2014/hugo-site-deployment/publish-workflow-alt.png">

<meta name="twitter:domain" content="stou.dk">


    <style>
      body {
        margin: 0px;
      }
    </style>
    

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-49034143-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-49034143-1');
</script>


  </head>
  <body>
    <div class="wrapper">

      <header class="page-header">
        <nav id="myTopNav" class="top-bar" data-topbar role="navigation">
    <div class="nav-wrapper">
        <div class="nav-logo">
            <h1><a href="/">Stou.dk</a></h1>
        </div>
            
        <div class="nav-toggle">
            <a href="javascript:void(0);" class="icon" onclick="toggleNavigation()">
            <i class="fa fa-bars"></i>
            </a>
        </div>    
    </div>
   
  <section class="nav-items">
    
    <ul class="tabs">
      <li><a href="/tags/travel">Travel</a></li>

<li><a href="/project/forecast-app">Sejladsudsigt</a></li>
<li><a href="/topics/programming">Programming</a></li>
<li><a href="/post">All Posts</a></li>

    </ul>
  </section>
</nav>

<script>
  function toggleNavigation() {
    var x = document.getElementById("myTopNav");
    if (x.className === "top-bar") {
      x.className += " responsive";
    } else {
      x.className = "top-bar";
    }
  }
</script>

      </header>

      <main class="page-main-content">
          


<article class="post">
  <header>

    <h1 class="post-title">Hugo Site Deployment</h1>
    <details>

      <summary>

        

        
        <span class="post-meta">
          Sun, Nov 30, 2014 - 2 Minute read
        </span>

        
        
          
          <span class="label">
            <a href="/tags/programming">#Programming</a>
          </span>
          
          <span class="label">
            <a href="/tags/blog">#Blog</a>
          </span>
          
          <span class="label">
            <a href="/tags/webauthoring">#Webauthoring</a>
          </span>
          
          <span class="label">
            <a href="/tags/hugo">#Hugo</a>
          </span>
          
          <span class="label">
            <a href="/tags/git">#Git</a>
          </span>
          
        
      </summary>

 
      
      
        





<div class="child-borders">
  <div class="toc border" aria-labelledby="toc-heading">
    <h2 id="toc-heading">Table of contents</h2>
    <ol>
      
        <li>
          
          
          
          
          <a href="#workflow">
            Workflow
          </a>
        </li>
      
        <li>
          
          
          
          
          <a href="#makefile">
            Makefile
          </a>
        </li>
      
    </ol>
  </div>
</div>

      
    </details>

  </header>

  <main>
    








<figure >
    
        <img src="/media/2014/hugo-site-deployment/publish-workflow-alt.png" alt="Texteditor, terminal and browser" />
    
    
</figure>

<!-- inspired by: https://github.com/spf13/hugo/issues/379 -->
<p>When I started publishing the blog I was using the git subtree approach, as <a href="http://gohugo.io/tutorials/github_pages_blog/">suggested in the hugo documentation</a>. 
However, I tend to mess up my setup when I amend or rebase when working with the local site.</p>
<p>Since I like to keep things simple, I have switched to keeping the generated site in a separate git repo, which I deploy by manually pushing to github pages.</p>
<p>The benefit of this is that I get to review the changes manually before deploying to the live site.</p>
<h2 id="workflow">Workflow</h2>
<p>Here is the basic outline of my workflow.</p>
<ol>
<li><strong>create</strong> and edit some <strong>content</strong></li>
<li><strong>review changes</strong> by serving up the site <strong>locally</strong></li>
<li><strong>make</strong> as many <strong>commits</strong> as desired in the site hugo sources</li>
<li><strong>build</strong> the site for deployment</li>
<li><strong>review changes</strong> to the deployment git repo.
I deliberately want to keep this step manual, since I am using the latest sources for hugo, and sometimes bugs causes weird things to happen to the ouput.</li>
<li><strong>push</strong> deployment repo <strong>to github</strong></li>
</ol>
<h2 id="makefile">Makefile</h2>
<p>The workflow may seem a little complicated, so I am using a Makefile I have created to avoid having to remember all the commands to type (or mistype, and screw up my site).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-makefile" data-lang="makefile">DEPLOYMENT_REPO<span style="color:#f92672">=</span>stou.github.io

<span style="color:#a6e22e">all</span><span style="color:#f92672">:</span> server

<span style="color:#a6e22e">build</span><span style="color:#f92672">:</span> dist

<span style="color:#a6e22e">help</span><span style="color:#f92672">:</span>
	@echo <span style="color:#e6db74">&#34;\033[0;4mAvailable targets:\033[0m&#34;</span>
	@echo <span style="color:#e6db74">&#34; server - serves up site locally (default target)&#34;</span>
	@echo <span style="color:#e6db74">&#34; build - build the content for deployment in </span><span style="color:#e6db74">${</span>DEPLOYMENT_REPO<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>

<span style="color:#a6e22e">view</span><span style="color:#f92672">:</span>
	<span style="color:#75715e"># open front page in browser</span>
	open http://localhost:1313

<span style="color:#a6e22e">server</span><span style="color:#f92672">:</span> clean
	<span style="color:#75715e"># Server the site up locally</span>
	hugo server -w  --buildDrafts<span style="color:#f92672">=</span>true

<span style="color:#a6e22e">clean</span><span style="color:#f92672">:</span>
	<span style="color:#75715e"># clean out the local server build artifacts</span>
	-rm -r public/*

<span style="color:#a6e22e">dist</span><span style="color:#f92672">:</span> dist-clean
	<span style="color:#75715e"># Build the project for publishing</span>
	hugo -s . -d <span style="color:#e6db74">${</span>DEPLOYMENT_REPO<span style="color:#e6db74">}</span>

<span style="color:#a6e22e">dist-clean</span><span style="color:#f92672">:</span>
	<span style="color:#75715e"># clean publishing output dir</span>
	<span style="color:#75715e"># NB: Avoid removing the .git folder</span>
	-rm -r <span style="color:#e6db74">${</span>DEPLOYMENT_REPO<span style="color:#e6db74">}</span>/*
</code></pre></div>
<p>This allows me to serve up the site locally simply by running <code>make</code>.</p>
<p>To build the site for deployment I run <code>make build</code>.</p>
<p>For the git operations, use whatever tool you are most familiar with. I personally like a combination of the command line and <a href="http://rowanj.github.io/gitx/">gitx</a>, since I am using the Mac.</p>

  </main>

</article>

<section class="post-nav">
    

    <article class="prev">

        
    

    
    <a href='/2014/11/koh-lanta-sup-review/'>
    <picture>
        <img
          src="/media/2014/koh-lanta-sup-review/IMG_8265.jpg"
          alt="Flowers"
        />
      </picture>
    </a>
    

    <h2><a href='/2014/11/koh-lanta-sup-review/'>Koh Lanta SUP Review</a></h2>

      <p class="subheader">Rejseberetning fra Thailand. SUP p√• Klong Dao Beach, Koh Lanta</p>
      <p class="post-meta">
        
        
        Thu, Nov 27, 2014 - 2&nbsp;Minute&nbsp;read
      </p>
  
      
</article>

  

 
  
  <article class="next">
    
    <a href='/2014/12/tour-de-lanta/'>
        <picture>
            <img
              src="/media/2014/tour-de-lanta/IMG_3765.jpg"
              alt="Cover image for post: Tour de Lanta"
            />
          </picture>
        </a>
        

    <h2><a href='/2014/12/tour-de-lanta/'>Tour de Lanta</a></h2>
    <p class="subheader">Rejseberetning fra Ko Lanta i Thailand. Swimmingpool, elefanter, regnvejr og beach volley.</p>
    <p class="post-meta">
      
      
      Mon, Dec 8, 2014 - 2&nbsp;Minute&nbsp;read
    </p>

    
      
</article>

</section>


<div class="well">
    <div class="tag-cloud">
    <h1><a href="/post" title="All posts">More Blog Posts</a></h1>

    
    
        
        
        
        
        
        
        
        

        <div class="tags">
            
                
                
                
                
                
                    <a class="tag"
                        href='/tags/android'
                        style="font-size:1.5586010916991393em"
                        title='4 posts tagged Android'
                        >
                            #Android
                            
                    </a>
            
                
                
                
                
                
                    <a class="tag"
                        href='/tags/bali'
                        style="font-size:1.9879016375487089em"
                        title='8 posts tagged Bali'
                        >
                            #Bali
                            
                    </a>
            
                
                
                
                
                
                    <a class="tag"
                        href='/tags/blog'
                        style="font-size:1.1293005458495697em"
                        title='2 posts tagged Blog'
                        >
                            #Blog
                            
                    </a>
            
                
                
                
                
                
                    <a class="tag"
                        href='/tags/costa-rica'
                        style="font-size:1.696804998558596em"
                        title='5 posts tagged Costa Rica'
                        >
                            #Costa Rica
                            
                    </a>
            
                
                
                
                
                
                    <a class="tag"
                        href='/tags/denmark'
                        style="font-size:1.1293005458495697em"
                        title='2 posts tagged Denmark'
                        >
                            #Denmark
                            
                    </a>
            
                
                
                
                
                
                    <a class="tag"
                        href='/tags/git'
                        style="font-size:0.7em"
                        title='1 posts tagged Git'
                        >
                            #Git
                            
                    </a>
            
                
                
                
                
                
                    <a class="tag"
                        href='/tags/hugo'
                        style="font-size:1.1293005458495697em"
                        title='2 posts tagged Hugo'
                        >
                            #Hugo
                            
                    </a>
            
                
                
                
                
                
                    <a class="tag"
                        href='/tags/indonesia'
                        style="font-size:1.9879016375487089em"
                        title='8 posts tagged Indonesia'
                        >
                            #Indonesia
                            
                    </a>
            
                
                
                
                
                
                    <a class="tag"
                        href='/tags/malaysia'
                        style="font-size:1.809725812560261em"
                        title='6 posts tagged Malaysia'
                        >
                            #Malaysia
                            
                    </a>
            
                
                
                
                
                
                    <a class="tag"
                        href='/tags/mobile-app'
                        style="font-size:1.696804998558596em"
                        title='5 posts tagged Mobile App'
                        >
                            #Mobile App
                            
                    </a>
            
                
                
                
                
                
                    <a class="tag"
                        href='/tags/preparation'
                        style="font-size:1.1293005458495697em"
                        title='2 posts tagged Preparation'
                        >
                            #Preparation
                            
                    </a>
            
                
                
                
                
                
                    <a class="tag"
                        href='/tags/programming'
                        style="font-size:1.9051990004328057em"
                        title='7 posts tagged Programming'
                        >
                            #Programming
                            
                    </a>
            
                
                
                
                
                
                    <a class="tag"
                        href='/tags/qatar'
                        style="font-size:0.7em"
                        title='1 posts tagged Qatar'
                        >
                            #Qatar
                            
                    </a>
            
                
                
                
                
                
                    <a class="tag"
                        href='/tags/sejladsudsigt'
                        style="font-size:1.696804998558596em"
                        title='5 posts tagged Sejladsudsigt'
                        >
                            #Sejladsudsigt
                            
                    </a>
            
                
                
                
                
                
                    <a class="tag"
                        href='/tags/singapore'
                        style="font-size:0.7em"
                        title='1 posts tagged Singapore'
                        >
                            #Singapore
                            
                    </a>
            
                
                
                
                
                
                    <a class="tag"
                        href='/tags/software-development'
                        style="font-size:1.696804998558596em"
                        title='5 posts tagged Software Development'
                        >
                            #Software Development
                            
                    </a>
            
                
                
                
                
                
                    <a class="tag"
                        href='/tags/sri-lanka'
                        style="font-size:1.809725812560261em"
                        title='6 posts tagged Sri Lanka'
                        >
                            #Sri Lanka
                            
                    </a>
            
                
                
                
                
                
                    <a class="tag"
                        href='/tags/sup'
                        style="font-size:0.7em"
                        title='1 posts tagged Sup'
                        >
                            #Sup
                            
                    </a>
            
                
                
                
                
                
                    <a class="tag"
                        href='/tags/surf'
                        style="font-size:1.1293005458495697em"
                        title='2 posts tagged Surf'
                        >
                            #Surf
                            
                    </a>
            
                
                
                
                
                
                    <a class="tag"
                        href='/tags/thailand'
                        style="font-size:2.126105544408166em"
                        title='10 posts tagged Thailand'
                        >
                            #Thailand
                            
                    </a>
            
                
                
                
                
                
                    <a class="tag"
                        href='/tags/travel'
                        style="font-size:2.9847066361073056em"
                        title='40 posts tagged Travel'
                        >
                            #Travel
                            
                    </a>
            
                
                
                
                
                
                    <a class="tag"
                        href='/tags/vietnam'
                        style="font-size:1.1293005458495697em"
                        title='2 posts tagged Vietnam'
                        >
                            #Vietnam
                            
                    </a>
            
                
                
                
                
                
                    <a class="tag"
                        href='/tags/webauthoring'
                        style="font-size:1.1293005458495697em"
                        title='2 posts tagged Webauthoring'
                        >
                            #Webauthoring
                            
                    </a>
            
        </div>
    
    
    </div>
</div>

<h1>Latest posts</h1>



<main class="post-list">
  <section class="post-list-wrapper">
     
        


  




<article class="post-list-item  has-cover-image">
  
  <section class="cover-image">
    <a class="list-cover-image" href="/2018/05/zip-lines-og-reggae/">
      <img src="/2018/05/zip-lines-og-reggae/img/20180423_102827.jpg" />
    </a>
  </section>
  

  <section class="post-details">
    <header>
      <h1>
        <a href="/2018/05/zip-lines-og-reggae/">Zip Lines og Reggae</a>
      </h1>
      
      <p class="post-description">Rejseberetning fra Costa Rica</p>
      
      <div class="post-meta">
        
        Mon, May 14, 2018 -
        
        6&nbsp;Minute&nbsp;read
        
      </div>
       
      <span class="label">
        <a href='/tags/travel'>#Travel</a>
      </span>
      
      <span class="label">
        <a href='/tags/costa-rica'>#Costa Rica</a>
      </span>
      
    </header>

    
    <p class="post-summary">
      
      
      Hjemmefra havde vi blandt andet solgt turen til Costa Rica til drengene ved, at fort√¶lle, at der skulle v√¶re nogle ret seje sv√¶vebaner man kunne pr√∏ve. Det er i Monteverde, at det virkeligt spiller - det der med sv√¶vebaner. Derfor var det n√¶ste stop p√• turen.
      
    </p>
    

    <footer>
      <a href="/2018/05/zip-lines-og-reggae/"><nobr>Read more ‚Üí</nobr></a>
    </footer>
  </section>
</article>

     
        


  




<article class="post-list-item  has-cover-image">
  
  <section class="cover-image">
    <a class="list-cover-image" href="/2018/04/broeleaber/">
      <img src="/2018/04/broeleaber/img/IMG_2447.jpg" />
    </a>
  </section>
  

  <section class="post-details">
    <header>
      <h1>
        <a href="/2018/04/broeleaber/">Br√∏leaber</a>
      </h1>
      
      <p class="post-description">Rejseberetning fra Costa Rica</p>
      
      <div class="post-meta">
        
        Fri, Apr 27, 2018 -
        
        6&nbsp;Minute&nbsp;read
        
      </div>
       
      <span class="label">
        <a href='/tags/travel'>#Travel</a>
      </span>
      
      <span class="label">
        <a href='/tags/costa-rica'>#Costa Rica</a>
      </span>
      
    </header>

    
    <p class="post-summary">
      
      
      Efter en del dage i surfparadis var selv vi, klar til at komme ud og se lidt mere af Costa Rica. I f√∏rste omgang var vi blevet enige om, at k√∏re videre til Nosara. Det ligger ca. 100 km op af kysten fra Santa Teresa.
Det ville v√¶re muligt, at k√∏re derop ad kystvejen men det kr√¶ver, at man krydser et par floder. Da det ikke p√• forh√•nd var til at sige, om det var t√∏rt nok til, at krydse floderne, besluttede vi - dvs. Helene bestemte det - at k√∏re den sikre tur p√• sm√• 200 km udenom.
      
    </p>
    

    <footer>
      <a href="/2018/04/broeleaber/"><nobr>Read more ‚Üí</nobr></a>
    </footer>
  </section>
</article>

     
        


  




<article class="post-list-item  has-cover-image">
  
  <section class="cover-image">
    <a class="list-cover-image" href="/2018/04/surf-eat-sleep-repeat/">
      <img src="/2018/04/surf-eat-sleep-repeat/img/IMG_2297.jpg" />
    </a>
  </section>
  

  <section class="post-details">
    <header>
      <h1>
        <a href="/2018/04/surf-eat-sleep-repeat/">Surf Eat Sleep Repeat</a>
      </h1>
      
      <p class="post-description">Rejseberetning fra Costa Rica</p>
      
      <div class="post-meta">
        
        Sat, Apr 21, 2018 -
        
        7&nbsp;Minute&nbsp;read
        
      </div>
       
      <span class="label">
        <a href='/tags/travel'>#Travel</a>
      </span>
      
      <span class="label">
        <a href='/tags/costa-rica'>#Costa Rica</a>
      </span>
      
    </header>

    
    <p class="post-summary">
      
      
      Nu er vi kommet til Nosara, hvor vi praktisk talt har en ranch lidt oppe af en bjergskr√•ning for os selv. Det vil sige, at vi har lejet et af v√¶relserne, men da det er lavs√¶son nu, er vi de eneste g√¶ster. Her er b√•de swimming pool, havudsigt og en irsk pub.
De sidste par uger, inden vi kom hertil, er g√•et med surf leg p√• Playa Hermosa.
      
    </p>
    

    <footer>
      <a href="/2018/04/surf-eat-sleep-repeat/"><nobr>Read more ‚Üí</nobr></a>
    </footer>
  </section>
</article>

     
        


  




<article class="post-list-item  has-cover-image">
  
  <section class="cover-image">
    <a class="list-cover-image" href="/2018/04/surfsponsorl%C3%B8b/">
      <img src="/2018/04/surfsponsorl%c3%b8b/img/20180418_104803.jpg" />
    </a>
  </section>
  

  <section class="post-details">
    <header>
      <h1>
        <a href="/2018/04/surfsponsorl%C3%B8b/">Surfsponsorl√∏b</a>
      </h1>
      
      <p class="post-description">Rejseberetning fra Costa Rica</p>
      
      <div class="post-meta">
        
        Sat, Apr 21, 2018 -
        
        2&nbsp;Minute&nbsp;read
        
      </div>
       
      <span class="label">
        <a href='/tags/travel'>#Travel</a>
      </span>
      
      <span class="label">
        <a href='/tags/costa-rica'>#Costa Rica</a>
      </span>
      
      <span class="label">
        <a href='/tags/surf'>#Surf</a>
      </span>
      
    </header>

    
    <p class="post-summary">
      
      
      Det at vi ikke var i Danmark eller havde cykler til r√•dighed skulle ikke forhindre drengene i at give deres bidrag til indsamlingen af penge til en ny legeplads p√• skolen.
Som en alternativ l√∏sning fandt vi p√• et andet koncept til indsamling af penge fra sponsorer.
      
    </p>
    

    <footer>
      <a href="/2018/04/surfsponsorl%C3%B8b/"><nobr>Read more ‚Üí</nobr></a>
    </footer>
  </section>
</article>

    
  </section>
</main>





      </main>

      <footer class="page-footer">
        <div class="footer-content">
          

<p class="copyright"><a href="/">Stou.dk</a> ¬© 2003‚Äê2020. All rights reserved.
</p>
<p><a href="/legal/privacy-policy">Privatlivspolitik</a></p>

        </div>
      </footer>
    </div>
    
  </body>
</html>
